{
  "properties": {
    "doc.Pivot-batchaggregator": "# Pivot plugin\n\nDescription\n----------- \nProvides the ability to pivot data out of the box, so that users can transpose, reorganise, group, and aggregate data.\n\nUse Case\n--------\nThis plugin can be used when user needs to transpose specific rows as columns, and generate aggregate results in those \ncolumns.\n\nProperties\n----------\n**Pivot Columns:** Specifies a list of fields pivot as columns. Usually, these fields contain a fixed set of values,\nwhich are converted into columns. When a single field is selected, the number of columns added is equal to the number\nof unique values in the field multiplied by the number of aggregates. When multiple fields are selected, the number\nof columns is the product of unique values in each column multiplied by the number of aggregates. Maximum number of \npivot columns allowed are 2. Allowed column types are: int, long, double, float, string, boolean.\n\n**Pivot rows:** Specifies fields in the input schema. The unique values in this field will become the rows \nof the output from the Pivot transform.\n\n**Aggregates:** Specifies a set of aggregate functions to be applied to the input data for each group (pivot rows).\nA function has the syntax alias:function_name(column). Should specify at least 1 aggregate function.\n\n**Number of Partitions:** Number of partitions to use when aggregating. If not specified, the execution framework \nwill decide how many to use. Defaults to ``1``.\n\n**Default Value:** The default value to use in case a cell does not contain a value after pivoting. Defaults \nto ``null``.\n\n**Field Aliases:** Sets up aliases for the fields generated by pivoting the data. By default, columns are of the form\n```<unique_value_in_pivot_column>_<aggregation_alias>```.\n\n\nExample\n-------\nConsider the dataset below depicting sales (numbers) of specific products in every quarter for a sports goods store.\n \n|Quarter|Product|Brand|Sales|\n|-------|-------|-----|-----|\n|Q1|Shoes|Nike|50|\n|Q1|Shirts|Nike|20|\n|Q1|Socks|Reebok|40|\n|Q1|Shirts|Reebok|60|\n|Q1|Shoes|Reebok|50|\n|Q2|Shoes|Nike|20|\n|Q2|Shoes|Reebok|30|\n|Q2|Socks|Nike|40|\n|Q3|Shoes|Nike|50|\n|Q3|Shoes|Reebok|30|\n|Q3|Socks|Reebok|40|\n|Q3|Socks|Nike|20|\n|Q4|Shoes|Reebok|10|\n|Q4|Shirts|Reebok|20|\n|Q4|Socks|Reebok|30|\n|Q4|Shoes|Nike|40|\n|Q4|Shirts|Nike|50|\n|Q4|Socks|Nike|60|\n\nWith the configuration containing single column set as the following:\nPivot Columns: ``Quarter=Q1,Q2,Q3,Q4``\nPivot Rows: ``Product``\nAggregations: ``total:sum(Sales)``\nDefault Value: ``0``\n\nThe output data will provide the sum of sales by each product for each quarter:\n\n|Product|Q1_total|Q2_total|Q3_total|Q4_total|\n|-------|--------|--------|--------|--------|\n|Shoes|100|50|80|50|\n|Socks|40|40|60|90|\n|Shirts|80|0|0|70|\n\nWith the configuration containing multiple columns set like following:\n\nPivot Columns: ``Quarter=Q1,Q2,Q3,Q4;Product=Shoes,Socks,Shirts``\nPivot Rows: ``Brand``\nAggregations: ``sum(Sales)``\n\nThe output data will provide sum of sales by a brand for each quarter and product:\n\n|Brand|Shoes_Q1|Shoes_Q2|Shoes_Q3|Shoes_Q4|Socks_Q1|Socks_Q2|Socks_Q3|Socks_Q4|Shirts_Q1|Shirts_Q2|Shirts_Q3|Shirts_Q4|\n|-----|--------|--------|--------|--------|--------|--------|--------|--------|---------|---------|---------|---------|\n|Nike|50|20|50|40|null|40|null|60|20|null|null|50\n|Reebok|50|30|30|10|40|null|40|30|60|null|null|20\n\nWith the configuration containing multiple rows set like following:\n\nPivot Columns: ``Quarter=Q1,Q2,Q3,Q4``\nPivot Rows: ``Brand,Product``\nAggregations: ``sum(Sales)``\n\n|Brand|Product|Q1_total|Q2_total|Q3_total|Q4_total|\n|-----|-------|--------|--------|--------|--------|\n|Nike|Shoes|50|20|50|40|\n|Nike|Socks|null|40|20|60|\n|Nike|Shirts|20|null|null|70|\n|Reebok|Shoes|50|30|30|10|\n|Reebok|Socks|40|null|40|30|\n|Reebok|Shirts|60|null|null|20|",
    "widgets.Pivot-batchaggregator": "{\n  \"outputs\": [],\n  \"metadata\": {\n    \"spec-version\": \"1.1\",\n    \"label\": \"Pivot\"\n  },\n  \"configuration-groups\": [\n    {\n      \"label\": \"Pivot settings\",\n      \"properties\": [\n        {\n          \"widget-type\": \"keyvalue\",\n          \"name\": \"pivotColumns\",\n          \"label\": \"Pivot Columns\",\n          \"widget-attributes\": {\n            \"kv-delimiter\": \"=\",\n            \"key-placeholder\": \"Field Name\",\n            \"value-placeholder\": \"Comma-separated unique values\",\n            \"delimiter\": \";\",\n            \"showDelimiter\": \"false\"\n          }\n        },\n        {\n          \"widget-type\": \"input-field-selector\",\n          \"name\": \"pivotRow\",\n          \"label\": \"Pivot Rows\",\n          \"widget-attributes\": {\"multiselect\": \"true\"}\n        },\n        {\n          \"widget-type\": \"function-dropdown-with-alias\",\n          \"name\": \"aggregates\",\n          \"label\": \"Aggregates\",\n          \"widget-attributes\": {\n            \"dropdownOptions\": [\n              \"Avg\",\n              \"Count\",\n              \"First\",\n              \"Last\",\n              \"Max\",\n              \"Min\",\n              {\n                \"label\": \"Standard Deviation\",\n                \"value\": \"Stddev\"\n              },\n              \"Sum\",\n              \"Variance\",\n              {\n                \"label\": \"Collect List\",\n                \"value\": \"CollectList\"\n              },\n              {\n                \"label\": \"Collect Set\",\n                \"value\": \"CollectSet\"\n              },\n              {\n                \"label\": \"Count Distinct\",\n                \"value\": \"CountDistinct\"\n              },\n              {\n                \"label\": \"Longest String\",\n                \"value\": \"LongestString\"\n              },\n              {\n                \"label\": \"Shortest String\",\n                \"value\": \"ShortestString\"\n              },\n              {\n                \"label\": \"Number of Nulls\",\n                \"value\": \"CountNulls\"\n              },\n              {\n                \"label\": \"Concat\",\n                \"value\": \"Concat\"\n              },\n              {\n                \"label\": \"Concat Distinct\",\n                \"value\": \"ConcatDistinct\"\n              },\n              {\n                \"label\": \"Logical AND\",\n                \"value\": \"LogicalAnd\"\n              },\n              {\n                \"label\": \"Logical OR\",\n                \"value\": \"LogicalOr\"\n              },\n              {\n                \"label\": \"Sum of squares\",\n                \"value\": \"SumOfSquares\"\n              },\n              {\n                \"label\": \"Corrected sum of squares\",\n                \"value\": \"CorrectedSumOfSquares\"\n              }\n            ],\n            \"placeholders\": {\n              \"field\": \"field\",\n              \"alias\": \"alias\"\n            }\n          }\n        }\n      ]\n    },\n    {\n      \"label\": \"Advanced\",\n      \"properties\": [\n        {\n          \"widget-type\": \"textbox\",\n          \"name\": \"numPartitions\",\n          \"label\": \"Number of Partitions\"\n        },\n        {\n          \"widget-type\": \"textbox\",\n          \"name\": \"defaultValue\",\n          \"label\": \"Default Value\",\n          \"widget-attributes\": {\"placeholder\": \"The default value to use in case a cell does not contain a value after pivoting. Defaults to null\"}\n        },\n        {\n          \"widget-type\": \"keyvalue\",\n          \"name\": \"fieldAliases\",\n          \"label\": \"Field Aliases\",\n          \"widget-attributes\": {\n            \"kv-delimiter\": \":\",\n            \"delimiter\": \",\",\n            \"showDelimiter\": \"false\"\n          }\n        }\n      ]\n    },\n    {\n      \"label\": \"Error Handling\",\n      \"properties\": [{\n        \"name\": \"on-error\",\n        \"widget-type\": \"radio-group\",\n        \"label\": \"On Error\",\n        \"widget-attributes\": {\n          \"layout\": \"block\",\n          \"default\": \"skip-error\",\n          \"options\": [\n            {\n              \"id\": \"skip-error\",\n              \"label\": \"Skip error\"\n            },\n            {\n              \"id\": \"send-to-error-port\",\n              \"label\": \"Send to error port\"\n            },\n            {\n              \"id\": \"fail-pipeline\",\n              \"label\": \"Fail pipeline\"\n            }\n          ]\n        }\n      }]\n    }\n  ],\n  \"emit-errors\": true,\n  \"emit-alerts\": true,\n  \"icon\": {\n    \"arguments\": {\"data\": \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAABFklEQVR4Ae2PIQjCYBCFLxiMdgz2\\r\\nZLAXO0Z7NlzvnXXsyWAw2jEu2DEaDIZFw+8LpkPhdmy8De+Drx3H+yRJkmTQzOEeXmH5oaV0ZA0r\\r\\nOJMgC/i0j+MBYW/RiCMsrABjJQGeAwqoJUChBhj/IiADMiADkkQ/jnZ8+dhJRPHY5Xij8gMC443K\\r\\nDwiMNyo/IDDeqPyAwHijUgPs+KBKCPAR/psBPnTMAeq4m5uf96EEqPNuY37WQwjQFqEnc7tnB2iL\\r\\n0N2X2zUzQB13U7iChy93FwGEADM+ZgOXhIDOxm8EsAIqWIJe4UoALSAQ8YBHuIUT6YHGH+CIIHD2\\r\\nBzgiCCzhyxvgiBBWxBk2gQAbMT5MhIw9IkmSHngDDonRJ0ow4foAAAAASUVORK5C\"},\n    \"type\": \"inline\"\n  }\n}"
  },
  "parents": [
    "system:cdap-data-pipeline[6.1.3,7.0.0-SNAPSHOT)",
    "system:cdap-data-streams[6.1.3,7.0.0-SNAPSHOT)"
  ]
}